<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="author" content="Florian Le Bourdais">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <title>Un flux RSS pour le podcast Sur les épaules de Darwin | Frolian's blog</title>

	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
        <link rel="alternate" type="application/atom+xml" title="Frolian's blog blog atom feed" href="/feeds/all.atom.xml" />
        <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="/theme/css/icons.css"/>
        <style>.highlight .hll { background-color: #ffffcc }
.highlight .c { color: #60a0b0; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #007020; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #60a0b0; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #007020 } /* Comment.Preproc */
.highlight .c1 { color: #60a0b0; font-style: italic } /* Comment.Single */
.highlight .cs { color: #60a0b0; background-color: #fff0f0 } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #808080 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0040D0 } /* Generic.Traceback */
.highlight .kc { color: #007020; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #007020; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #007020; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #007020 } /* Keyword.Pseudo */
.highlight .kr { color: #007020; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #902000 } /* Keyword.Type */
.highlight .m { color: #40a070 } /* Literal.Number */
.highlight .s { color: #4070a0 } /* Literal.String */
.highlight .na { color: #4070a0 } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #0e84b5; font-weight: bold } /* Name.Class */
.highlight .no { color: #60add5 } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #d55537; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #007020 } /* Name.Exception */
.highlight .nf { color: #06287e } /* Name.Function */
.highlight .nl { color: #002070; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #062873; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #bb60d5 } /* Name.Variable */
.highlight .ow { color: #007020; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #40a070 } /* Literal.Number.Float */
.highlight .mh { color: #40a070 } /* Literal.Number.Hex */
.highlight .mi { color: #40a070 } /* Literal.Number.Integer */
.highlight .mo { color: #40a070 } /* Literal.Number.Oct */
.highlight .sb { color: #4070a0 } /* Literal.String.Backtick */
.highlight .sc { color: #4070a0 } /* Literal.String.Char */
.highlight .sd { color: #4070a0; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #4070a0 } /* Literal.String.Double */
.highlight .se { color: #4070a0; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #4070a0 } /* Literal.String.Heredoc */
.highlight .si { color: #70a0d0; font-style: italic } /* Literal.String.Interpol */
.highlight .sx { color: #c65d09 } /* Literal.String.Other */
.highlight .sr { color: #235388 } /* Literal.String.Regex */
.highlight .s1 { color: #4070a0 } /* Literal.String.Single */
.highlight .ss { color: #517918 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #bb60d5 } /* Name.Variable.Class */
.highlight .vg { color: #bb60d5 } /* Name.Variable.Global */
.highlight .vi { color: #bb60d5 } /* Name.Variable.Instance */
.highlight .il { color: #40a070 } /* Literal.Number.Integer.Long */</style>
        <style>body {
  margin: 0;
  padding: 0;
  font: 15px 'Source Sans Pro', sans-serif;
  line-height: 1.6em;
  color: #222;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
}
a {
  color: #007EE5;
  text-decoration: none;
}
a:hover {
  color: #007EE5;
  text-decoration: none;
}
header.main-header {
  background: none repeat scroll 0% 0% #205F29;
  margin-bottom: 0px;
}
header.main-header a {
  color: #fff;
}
header.main-header .container {
  max-width: 1000px;
}
header.main-header .container nav a:hover {
  background-color: #5C881C;
}
article {
  margin: 0;
}
article header.about {
  margin-bottom: 0px;
  padding-bottom: 0px;
}
article header {
  margin-bottom: 20px;
  padding-bottom: 20px;
}
article header h1 {
  margin-bottom: 2px;
  font-weight: 700;
  color: #000;
}
article header time {
  color: #9E9E9E;
  font-size: 0.85em;
  float: right;
}
article header time.left {
  color: #9E9E9E;
  font-size: 0.85em;
  float: left;
}
article div.social-links ul {
  padding: 0px;
}
article div.social-links li {
  display: inline;
  font-size: 20px;
}
article div.social-links li a {
  color: #000;
  padding: 10px;
}
article div.social-links li a:hover {
  color: #666;
  text-decoration: none;
}
article p {
  font-size: 16px;
  margin-bottom: 20px;
  line-height: 1.6em;
}
article p.note {
  background: #f5f5f5;
  border: 1px solid #ddd;
  padding: 0.533em 0.733em;
}
article p.update {
  background-color: #FEEFB3;
  border: 1px solid #e6e68a;
  padding: 0.533em 0.733em;
}
article p.alert {
  background-color: #ffe2e2;
  border: 1px solid #ffb2b2;
  padding: 0.533em 0.733em;
}
article ul,
article ol {
  margin-top: 0px;
  margin-bottom: 25px;
}
article li {
  font-size: 16px;
  line-height: 1.6em;
}
article a:hover {
  text-decoration: underline;
}
article blockquote {
  border-left: 2px solid #c7c7cc;
  color: #666;
  margin: 30px 0;
  padding: 0 0 0 25px;
}
article img {
  max-width: 100%;
}
article code {
  color: #333;
  background-color: #EEE;
  border-radius: 0;
  font-size: 13px;
}
article .meta {
  font-size: 11px;
}
article .meta a:hover {
  text-decoration: none;
}
article .meta div {
  margin-bottom: 20px;
  display: block;
}
article header a.tag {
  padding: 1px 12px;
  display: inline-block;
  font-size: 14px;
  color: rgba(0, 0, 0, 0.8);
  background: rgba(0, 0, 0, 0.05);
}
article header a.tag:hover{
  background: rgba(0, 0, 0, 0.15);
  text-decoration: none;
}
article .meta a.tag {
  margin: 0 10px 10px 0;
  padding: 1px 12px;
  display: inline-block;
  font-size: 14px;
  color: rgba(0, 0, 0, 0.8);
  background: rgba(0, 0, 0, 0.05);
}
article .meta a.tag:hover {
  background: rgba(0, 0, 0, 0.15);
}
article .meta a.read_more,
article .meta a.comments_btn {
  font-size: 14px;
  font-weight: 800;
  padding: 10px 20px;
  color: #205F29;
  background: #FFF;
  border: 1px solid #205F29;
}
article .meta a.read_more:hover,
article .meta a.comments_btn:hover {
  color: #FFF;
  background: #5C881C;
}
.index {
  max-width: 700px;
}
.index article header h2 {
  font-size: 36px;
  margin-bottom: 2px;
  font-weight: 700;
}
.index article header h2 a {
  color: #000;
}
.index article header h2 a:hover {
  color: #007EE5;
  text-decoration: none;
}
.index .separator {
  padding: 40px 0 0 0;
  margin: 0 0 40px 0;
  height: 10px;
  border-bottom: solid 1px #CCC;
}
.index .pagination {
  display: block;
  margin-bottom: 100px;
}
.index .pagination .left {
  text-align: right;
}
.index .pagination .right {
  text-align: left;
}
.index .pagination a {
  display: inline-block;
  border: 2px solid #5C881C;
  margin: 0 5px;
  padding: 8px 20px;
  font-weight: bold;
  color: #5C881C;
}
.index .pagination a:hover {
  color: #FFF;
  background: #5C881C;
}
.post {
  max-width: 700px;
}
.post h2:before {
  content: "# ";
  font-weight: bold;
  color: #DDD;
}
.post h3:before {
  content: "## ";
  font-weight: bold;
  color: #DDD;
}
.post h4:before {
  content: "### ";
  font-weight: bold;
  color: #DDD;
}
.post article .meta {
  margin: 50px 0 100px;
}
.list {
  max-width: 700px;
}
.list ul.double-list {
  margin: 0 auto 60px;
  padding: 0;
  list-style-type: none;
}
.list ul.double-list li {
  padding: 5px 0;
}
.list ul.double-list li h2 {
  font-size: 1em;
  display: inline;
  font-weight: normal;
}
.list ul.double-list li span {
  font-family: sans-serif;
  text-transform: uppercase;
  text-align: right;
  float: right;
  padding-top: 3px;
  font-size: 12px;
  color: #999;
}
.full-width-content {
  padding-top: 10px;
  padding-left: 0px;
  padding-right: 0px;
  margin-left: -20px;
  margin-right: -20px;
}
.col-xs-1,
.col-sm-1,
.col-md-1,
.col-lg-1,
.col-xs-2,
.col-sm-2,
.col-md-2,
.col-lg-2,
.col-xs-3,
.col-sm-3,
.col-md-3,
.col-lg-3,
.col-xs-4,
.col-sm-4,
.col-md-4,
.col-lg-4,
.col-xs-5,
.col-sm-5,
.col-md-5,
.col-lg-5,
.col-xs-6,
.col-sm-6,
.col-md-6,
.col-lg-6,
.col-xs-7,
.col-sm-7,
.col-md-7,
.col-lg-7,
.col-xs-8,
.col-sm-8,
.col-md-8,
.col-lg-8,
.col-xs-9,
.col-sm-9,
.col-md-9,
.col-lg-9,
.col-xs-10,
.col-sm-10,
.col-md-10,
.col-lg-10,
.col-xs-11,
.col-sm-11,
.col-md-11,
.col-lg-11,
.col-xs-12,
.col-sm-12,
.col-md-12,
.col-lg-12 {
  padding-right: 0px;
  padding-left: 0px;
}
.featured-image {
  display: block;
  margin-left: auto;
  margin-right: auto;
  max-height: 350px;
}</style>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


    </head>

    <body>
        <header class="navbar navbar-inverse bs-docs-nav">
            <div class="container-fluid">
                <div class="navbar-header">
		  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#theNavbar">
		    <span class="icon-bar"></span>
		    <span class="icon-bar"></span>
		    <span class="icon-bar"></span> 
		  </button>
                  <a class="navbar-brand" href="/" title="Home" class="title">Frolian's blog</a>
                </div>
                <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation" id="theNavbar">
		    <ul class="nav navbar-nav navbar-right">
                            <li><a href="pages/about.html" title="About">About</a></li>
                            <li><a href="/archives.html" title="Archive">Archive</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <div id="wrap">
<div class="container post">
    <article>
        <header>
            <h1>Un flux RSS pour le podcast Sur les épaules de Darwin</h1>
			<time datetime="article.date.isoformat()" pubdate>08/09/2017</time>			
			<div>
					<a href="http://flothesof.github.io/tag/podcast.html" class="tag">Podcast</a>
			</div>
        </header>

        <div class="article_content">
            <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Dans ce billet, nous allons <a href="http://flothesof.github.io/podcast-rendez-vous-avec-X-fr.html">comme il y a quelques semaines</a>, construire un flux RSS pour mon émission radio préférée : <em>Sur les épaules de Darwin</em>, animée par l'extraordinaire Jean Claude Ameisen.</p>
<p>Afin de faire ceci, nous allons partir du <a href="http://clementgrimal.fr/darwin/">travail de Clément Grimal</a>, qui maintient une liste à jour des émissions avec des liens de téléchargement. Une question, avant de commencer. Pourquoi faire ce travail, alors que le site de Clément permet déjà d'écouter à volonté ces émissions ? Tout simplement parce que son site ne permet pas de faire une recherche plein texte sur le contenu des émissions et également parce que j'aime écouter les émissions dans un logiciel de podcast afin de marquer ma progression.</p>
<p>Le lien vers le flux RSS généré à partir du présent notebook est ici : <strong><a href="https://raw.githubusercontent.com/flothesof/posts/master/files/podcast_Sur_les_epaules_de_Darwin.xml">https://raw.githubusercontent.com/flothesof/posts/master/files/podcast_Sur_les_epaules_de_Darwin.xml</a></strong>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="R&#233;cup&#233;ration-des-liens-vers-les-&#233;missions">R&#233;cup&#233;ration des liens vers les &#233;missions<a class="anchor-link" href="#R&#233;cup&#233;ration-des-liens-vers-les-&#233;missions">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">base_url</span> <span class="o">=</span> <span class="s2">&quot;http://clementgrimal.fr/darwin/&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">base_url</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>On utilise beautiful soup pour déconstruire le résultat et chercher les différents liens dont nous avons besoin :</p>
<ul>
<li>titre de l'émission</li>
<li>date de diffusion</li>
<li>lien de téléchargement</li>
<li>lien vers la page du site France Inter (pour en extraire la description de l'émission)</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>On peut extraire toutes les émissions comme ceci :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">all_shows</span> <span class="o">=</span> <span class="p">([</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="p">(</span><span class="n">li</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">li</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">))</span> <span class="k">if</span> <span class="n">item</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">all_shows</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>385</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A partir de la première émission, on peut obtenir le lien vers le mp3 ainsi que le site France Inter, de même que le titre et la date de diffusion :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">show</span> <span class="o">=</span> <span class="n">all_shows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s1">&#39;download-link&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;http://prevost.pascal.free.fr/public/podcast/sur_les_epaules_de_darwin/Jean-Claude%20Ameisen%20-%20SUR%20LES%20EPAULES%20DE%20DARWIN%2004.09.2010.mp3&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[10]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;http://www.franceinter.fr/em/sur-les-epaules-de-darwin/94428&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#34;La théorie de l&#39;évolution de Charles Darwin&#34;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">str</span><span class="p">(</span><span class="n">show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">next_sibling</span><span class="p">)[</span><span class="mi">14</span><span class="p">:]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;4 Septembre 2010&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Ecrivons maintenant une boucle sur tous les épisodes :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">show_data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">show</span> <span class="ow">in</span> <span class="n">all_shows</span><span class="p">:</span>
    <span class="n">download_link</span> <span class="o">=</span> <span class="n">show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s1">&#39;download-link&#39;</span><span class="p">)</span>
    <span class="n">description_link</span> <span class="o">=</span> <span class="n">show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="n">date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">next_sibling</span><span class="p">)[</span><span class="mi">14</span><span class="p">:]</span>
    <span class="k">if</span> <span class="n">download_link</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">download_link</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">):</span>
            <span class="n">download_link</span> <span class="o">=</span> <span class="s2">&quot;http://clementgrimal.fr/darwin&quot;</span> <span class="o">+</span> <span class="n">download_link</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">download_link</span> <span class="o">=</span> <span class="n">download_link</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">show_data</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">download_link</span><span class="p">,</span> <span class="n">description_link</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">date</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Construisons un tableau avec ces données :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">show_data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lien mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;lien description&#39;</span><span class="p">,</span> <span class="s1">&#39;titre&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[15]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>lien mp3</th>
      <th>lien description</th>
      <th>titre</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>La théorie de l'évolution de Charles Darwin</td>
      <td>4 Septembre 2010</td>
    </tr>
    <tr>
      <th>1</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Le propre de l'homme?</td>
      <td>11 Septembre 2010</td>
    </tr>
    <tr>
      <th>2</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Nos mémoires</td>
      <td>18 Septembre 2010</td>
    </tr>
    <tr>
      <th>3</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Nos émotions</td>
      <td>25 Septembre 2010</td>
    </tr>
    <tr>
      <th>4</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Longévité, jeunesse et vieillissement</td>
      <td>2 Octobre 2010</td>
    </tr>
    <tr>
      <th>5</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>MORT CELLULAIRE ET SCULPTURE DU VIVANT</td>
      <td>9 Octobre 2010</td>
    </tr>
    <tr>
      <th>6</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>NAISSANCES</td>
      <td>16 Octobre 2010</td>
    </tr>
    <tr>
      <th>7</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Biodiversité</td>
      <td>23 Octobre 2010</td>
    </tr>
    <tr>
      <th>8</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>mort cellulaire et sculpture du vivant (2)</td>
      <td>30 Octobre 2010</td>
    </tr>
    <tr>
      <th>9</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Un voyage avec Oliver Sacks         ( 1 )</td>
      <td>6 Novembre 2010</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[16]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>lien mp3</th>
      <th>lien description</th>
      <th>titre</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>371</th>
      <td>http://clementgrimal.fr/darwin/files/2017-12-0...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>A la recherche des mystères du sommeil (3)</td>
      <td>9 Décembre 2017</td>
    </tr>
    <tr>
      <th>372</th>
      <td>http://clementgrimal.fr/darwin/files/2017-12-1...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>Explorer</td>
      <td>16 Décembre 2017</td>
    </tr>
    <tr>
      <th>373</th>
      <td>http://clementgrimal.fr/darwin/files/2017-12-2...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>Les forges du ciel</td>
      <td>23 Décembre 2017</td>
    </tr>
    <tr>
      <th>374</th>
      <td>http://clementgrimal.fr/darwin/files/2017-12-3...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>Les forges du ciel (2)</td>
      <td>30 Décembre 2017</td>
    </tr>
    <tr>
      <th>375</th>
      <td>http://clementgrimal.fr/darwin/files/2018-01-0...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>La glace et le feu</td>
      <td>6 Janvier 2018</td>
    </tr>
    <tr>
      <th>376</th>
      <td>http://clementgrimal.fr/darwin/files/2018-01-1...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>Eclats de passé : le Croissant Fertile</td>
      <td>13 Janvier 2018</td>
    </tr>
    <tr>
      <th>377</th>
      <td>http://clementgrimal.fr/darwin/files/2018-01-2...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>Eclats de passé : la révolution Néolithique</td>
      <td>20 Janvier 2018</td>
    </tr>
    <tr>
      <th>378</th>
      <td>http://clementgrimal.fr/darwin/files/2018-01-2...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>Eclats de passé : A la recherche des origines ...</td>
      <td>27 Janvier 2018</td>
    </tr>
    <tr>
      <th>379</th>
      <td>http://clementgrimal.fr/darwin/files/2018-02-0...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>A la recherche des origines des inégalités (2)</td>
      <td>3 Février 2018</td>
    </tr>
    <tr>
      <th>380</th>
      <td>http://clementgrimal.fr/darwin/files/2018-02-1...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>A la recherche des origines des inégalités (3)</td>
      <td>10 Février 2018</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[17]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>lien mp3</th>
      <th>lien description</th>
      <th>titre</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>381</td>
      <td>381</td>
      <td>381</td>
      <td>381</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>381</td>
      <td>381</td>
      <td>310</td>
      <td>381</td>
    </tr>
    <tr>
      <th>top</th>
      <td>http://clementgrimal.fr/darwin/files/2014-11-2...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>La glace et le feu</td>
      <td>22 Février 2014</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Nous voilà maintenant en possession des liens vers 381 épisodes publiés sur le site de Clément Grimal. On remarque que certaines d'entre elles sont des rediffusions (310 épisodes uniques sur 381).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Téléchargeons maintenant les descriptions des émissions.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="T&#233;l&#233;chargement-des-descriptions-&#224;-partir-du-site-de-France-Inter">T&#233;l&#233;chargement des descriptions &#224; partir du site de France Inter<a class="anchor-link" href="#T&#233;l&#233;chargement-des-descriptions-&#224;-partir-du-site-de-France-Inter">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Nous avons les liens vers les descriptions : il suffit donc de lire la page de chaque émission et d'en extraire le contenu intéressant.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">link</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;lien description&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">link</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[18]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;http://www.franceinter.fr/em/sur-les-epaules-de-darwin/94428&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">article</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;article&#39;</span><span class="p">)</span>
<span class="n">article</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[20]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;article class=&#34;content-body&#34;&gt;
&lt;p&gt;&lt;strong&gt;Bibliographie:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;L&#39;origine des espèces de Charles Darwin aux Editions Flammarion Origines,&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;dva_ad inread&#34; id=&#34;dva_128139881/RF_france_inter/divers/divers/rg/inread0&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;text/javascript&#34;&gt;
    window.dejavuAds = window.dejavuAds || {
        targets: null,
        slots: []
    };
    var deviceSizes = { all: [[2, 2],], desktop: [[533, 300],],  };
    window.dejavuAds.slots.push({
        name: &#39;dva_128139881/RF_france_inter/divers/divers/rg/inread0&#39;,
        id: &#39;dva_128139881/RF_france_inter/divers/divers/rg/inread0&#39;,
        adunit: &#39;128139881/RF_france_inter/divers/divers/rg/inread&#39;,
        sizes: deviceSizes,
        targets: { pos: &#39;inread&#39; }
    });
&lt;/script&gt;
&lt;p&gt;&lt;strong&gt;Lettres choisies (1828-1859)de Charles Darwin traduit de l&#39;anglais par Mickael Popelard préface de Stefen Jay Gould aux Editions Bayard&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;L&#39;expression des émotions chez les hommes et les animaux de Charles Darwin aux Editions Rivages&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;La lettre volée, d&#39;Edgar Allan Poe, Ed Folio Gallimard&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;La mal-mesure de l&#39;homme de Stephen Jay Gould aux Editions Odile Jacob&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Identité et violence: l&#39;illusion du destin d&#39;Amartya Sen aux editions Odile Jacob&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&#34;Dans la Lumière et les Ombres. Darwin et le bouleversement du monde&#34; de Jean-Claude Ameisen aux Editions Fayard / Seuil&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;invité(s)&lt;/strong&gt;&lt;/h3&gt;
&lt;h3&gt;&lt;strong&gt;Charles Darwin 1809-1882&lt;/strong&gt;&lt;/h3&gt;
&lt;h3&gt;&lt;strong&gt;programmation musicale&lt;/strong&gt;&lt;/h3&gt;
&lt;h3&gt;&lt;strong&gt;Benjamin Biolay&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Si tu suis mon regard album: LA SUPERBElabel: NAIVE RECORDSparution: 2010&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;Jane Birkin&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Apocalypstick album: EX FAN DES SIXTIESlabel: FONTANAparution: 1978&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;Luke&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;LE ROBOT album: LE ROBOTlabel: JIVE EPIC / SONYparution: 2010&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;Cat power&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;THE GREATEST album: THE GREATESTlabel: MATADORparution: 2006&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;Amparo Sanchez et Omara Portuondo&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;La parrandita de las santas album: TUCSON HABANAlabel: VIA LACTEA RECORDSparution: 2010&lt;/strong&gt;&lt;/p&gt;
&lt;/article&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Il se trouve que des balises script sont contenues dans les épisodes (elles affichent de la publicité sur le site de France Inter).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Si on reformate les tags HTML, on obtient le résultat suivant :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">bs4</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">make_description</span><span class="p">(</span><span class="n">article</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extracts a text-only description of the formatted HTML.&quot;&quot;&quot;</span>
    <span class="n">desc</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">unmatched</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">article</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">tag</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;p&#39;</span><span class="p">:</span>
            <span class="n">desc</span> <span class="o">+=</span> <span class="s1">&#39;&#39;</span> <span class="o">+</span> <span class="n">tag</span><span class="o">.</span><span class="n">text</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">elif</span> <span class="n">tag</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;h1&#39;</span><span class="p">:</span>
            <span class="n">desc</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">tag</span><span class="o">.</span><span class="n">text</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">elif</span> <span class="n">tag</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;h2&#39;</span><span class="p">:</span>
            <span class="n">desc</span> <span class="o">+=</span> <span class="s1">&#39;  &#39;</span> <span class="o">+</span> <span class="n">tag</span><span class="o">.</span><span class="n">text</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">elif</span> <span class="n">tag</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;h3&#39;</span><span class="p">:</span>
            <span class="n">desc</span> <span class="o">+=</span> <span class="s1">&#39;   &#39;</span> <span class="o">+</span> <span class="n">tag</span><span class="o">.</span><span class="n">text</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">elif</span> <span class="n">tag</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;blockquote&#39;</span><span class="p">:</span>
            <span class="n">desc</span> <span class="o">+=</span> <span class="s1">&#39;&gt;&#39;</span> <span class="o">+</span> <span class="n">tag</span><span class="o">.</span><span class="n">text</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">elif</span> <span class="n">tag</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;ul&#39;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot; - &quot;</span> <span class="o">+</span> <span class="n">child</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">tag</span><span class="o">.</span><span class="n">children</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">bs4</span><span class="o">.</span><span class="n">Tag</span><span class="p">)]:</span>
                <span class="n">desc</span> <span class="o">+=</span> <span class="n">item</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
                    <span class="n">desc</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">elif</span> <span class="n">tag</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span>
            <span class="n">desc</span> <span class="o">+=</span> <span class="n">tag</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">elif</span> <span class="n">tag</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;ol&#39;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">tag</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">bs4</span><span class="o">.</span><span class="n">Tag</span><span class="p">):</span>
                    <span class="n">desc</span> <span class="o">+=</span> <span class="n">child</span><span class="o">.</span><span class="n">text</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">elif</span> <span class="n">tag</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;aside&#39;</span><span class="p">]:</span>
            <span class="n">desc</span> <span class="o">+=</span> <span class="n">make_description</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">unmatched</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">unmatched</span><span class="p">))</span>
    <span class="k">assert</span> <span class="nb">set</span><span class="p">([</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="s1">&#39;figure&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">issuperset</span><span class="p">(</span><span class="n">unmatched</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">desc</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Voici donc notre version texte seul pour la description :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">desc</span> <span class="o">=</span> <span class="n">make_description</span><span class="p">(</span><span class="n">article</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">desc</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Bibliographie:
L&#39;origine des espèces de Charles Darwin aux Editions Flammarion Origines,
Lettres choisies (1828-1859)de Charles Darwin traduit de l&#39;anglais par Mickael Popelard préface de Stefen Jay Gould aux Editions Bayard
L&#39;expression des émotions chez les hommes et les animaux de Charles Darwin aux Editions Rivages
La lettre volée, d&#39;Edgar Allan Poe, Ed Folio Gallimard
La mal-mesure de l&#39;homme de Stephen Jay Gould aux Editions Odile Jacob
Identité et violence: l&#39;illusion du destin d&#39;Amartya Sen aux editions Odile Jacob
&#34;Dans la Lumière et les Ombres. Darwin et le bouleversement du monde&#34; de Jean-Claude Ameisen aux Editions Fayard / Seuil
   invité(s)
   Charles Darwin 1809-1882
   programmation musicale
   Benjamin Biolay
Si tu suis mon regard album: LA SUPERBElabel: NAIVE RECORDSparution: 2010
   Jane Birkin
Apocalypstick album: EX FAN DES SIXTIESlabel: FONTANAparution: 1978
   Luke
LE ROBOT album: LE ROBOTlabel: JIVE EPIC / SONYparution: 2010
   Cat power
THE GREATEST album: THE GREATESTlabel: MATADORparution: 2006
   Amparo Sanchez et Omara Portuondo
La parrandita de las santas album: TUCSON HABANAlabel: VIA LACTEA RECORDSparution: 2010

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>On peut comparer notre version à l'original:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">HTML</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">article</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[30]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<article class="content-body">
<p><strong>Bibliographie:</strong></p>
<p><strong>L'origine des espèces de Charles Darwin aux Editions Flammarion Origines,</strong></p>
<div class="dva_ad inread" id="dva_128139881/RF_france_inter/divers/divers/rg/inread0"></div>

<p><strong>Lettres choisies (1828-1859)de Charles Darwin traduit de l'anglais par Mickael Popelard préface de Stefen Jay Gould aux Editions Bayard</strong></p>
<p><strong>L'expression des émotions chez les hommes et les animaux de Charles Darwin aux Editions Rivages</strong></p>
<p><strong>La lettre volée, d'Edgar Allan Poe, Ed Folio Gallimard</strong></p>
<p><strong>La mal-mesure de l'homme de Stephen Jay Gould aux Editions Odile Jacob</strong></p>
<p><strong>Identité et violence: l'illusion du destin d'Amartya Sen aux editions Odile Jacob</strong></p>
<p><strong>"Dans la Lumière et les Ombres. Darwin et le bouleversement du monde" de Jean-Claude Ameisen aux Editions Fayard / Seuil</strong></p>
<h3><strong>invité(s)</strong></h3>
<h3><strong>Charles Darwin 1809-1882</strong></h3>
<h3><strong>programmation musicale</strong></h3>
<h3><strong>Benjamin Biolay</strong></h3>
<p><strong>Si tu suis mon regard album: LA SUPERBElabel: NAIVE RECORDSparution: 2010</strong></p>
<h3><strong>Jane Birkin</strong></h3>
<p><strong>Apocalypstick album: EX FAN DES SIXTIESlabel: FONTANAparution: 1978</strong></p>
<h3><strong>Luke</strong></h3>
<p><strong>LE ROBOT album: LE ROBOTlabel: JIVE EPIC / SONYparution: 2010</strong></p>
<h3><strong>Cat power</strong></h3>
<p><strong>THE GREATEST album: THE GREATESTlabel: MATADORparution: 2006</strong></p>
<h3><strong>Amparo Sanchez et Omara Portuondo</strong></h3>
<p><strong>La parrandita de las santas album: TUCSON HABANAlabel: VIA LACTEA RECORDSparution: 2010</strong></p>
</article>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>On peut maintenant écrire une boucle sur toutes les descriptions d'épisode :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">lru_cache</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[32]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">link_getter</span><span class="p">(</span><span class="n">description_link</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">description_link</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">tqdm</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[34]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">descriptions</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">description_link</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="o">.</span><span class="n">tqdm_notebook</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;lien description&#39;</span><span class="p">]):</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">link_getter</span><span class="p">(</span><span class="n">description_link</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
    <span class="n">article</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;article&#39;</span><span class="p">)</span>
    <span class="n">script</span> <span class="o">=</span> <span class="n">article</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">script</span><span class="p">:</span>
        <span class="n">script</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
    <span class="n">descriptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_description</span><span class="p">(</span><span class="n">article</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





 
 
<div id="97d92387-2314-4674-9da5-ab0e010591d6"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#97d92387-2314-4674-9da5-ab0e010591d6');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "845c4d52560b4575a1ae74aedfb09f9d", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[35]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">descriptions</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[36]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[36]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>lien mp3</th>
      <th>lien description</th>
      <th>titre</th>
      <th>date</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>La théorie de l'évolution de Charles Darwin</td>
      <td>4 Septembre 2010</td>
      <td>Bibliographie:\nL'origine des espèces de Charl...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Le propre de l'homme?</td>
      <td>11 Septembre 2010</td>
      <td>programmation musicale\n   STAFF BENDA BILI...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Nos mémoires</td>
      <td>18 Septembre 2010</td>
      <td>programmation musicale\n   Iggy POP\nKing o...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Nos émotions</td>
      <td>25 Septembre 2010</td>
      <td>programmation musicale\n   EMILY LOISEAU\nL...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Longévité, jeunesse et vieillissement</td>
      <td>2 Octobre 2010</td>
      <td>programmation musicale\n   Bonga\nMona ki g...</td>
    </tr>
    <tr>
      <th>5</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>MORT CELLULAIRE ET SCULPTURE DU VIVANT</td>
      <td>9 Octobre 2010</td>
      <td>programmation musicale\n   Nouvelle vague /...</td>
    </tr>
    <tr>
      <th>6</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>NAISSANCES</td>
      <td>16 Octobre 2010</td>
      <td>invité(s)\n   René Frydman\nChef du Pôle Mè...</td>
    </tr>
    <tr>
      <th>7</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Biodiversité</td>
      <td>23 Octobre 2010</td>
      <td>"L'infinité des formes les plus belles et les ...</td>
    </tr>
    <tr>
      <th>8</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>mort cellulaire et sculpture du vivant (2)</td>
      <td>30 Octobre 2010</td>
      <td>« Nous ne nous baignons pas deux fois dans le ...</td>
    </tr>
    <tr>
      <th>9</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Un voyage avec Oliver Sacks         ( 1 )</td>
      <td>6 Novembre 2010</td>
      <td>A la rencontre de la singularité de nos mondes...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[37]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[37]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>lien mp3</th>
      <th>lien description</th>
      <th>titre</th>
      <th>date</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>371</th>
      <td>http://clementgrimal.fr/darwin/files/2017-12-0...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>A la recherche des mystères du sommeil (3)</td>
      <td>9 Décembre 2017</td>
      <td>\n            A la recherche des mystères du s...</td>
    </tr>
    <tr>
      <th>372</th>
      <td>http://clementgrimal.fr/darwin/files/2017-12-1...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>Explorer</td>
      <td>16 Décembre 2017</td>
      <td>\n            Explorer\n        \nUne heure qu...</td>
    </tr>
    <tr>
      <th>373</th>
      <td>http://clementgrimal.fr/darwin/files/2017-12-2...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>Les forges du ciel</td>
      <td>23 Décembre 2017</td>
      <td>\n            Les forges du ciel\n        \nNo...</td>
    </tr>
    <tr>
      <th>374</th>
      <td>http://clementgrimal.fr/darwin/files/2017-12-3...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>Les forges du ciel (2)</td>
      <td>30 Décembre 2017</td>
      <td>\n            Les forges du ciel (2)\n        ...</td>
    </tr>
    <tr>
      <th>375</th>
      <td>http://clementgrimal.fr/darwin/files/2018-01-0...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>La glace et le feu</td>
      <td>6 Janvier 2018</td>
      <td>\n            La glace et le feu \n        \nN...</td>
    </tr>
    <tr>
      <th>376</th>
      <td>http://clementgrimal.fr/darwin/files/2018-01-1...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>Eclats de passé : le Croissant Fertile</td>
      <td>13 Janvier 2018</td>
      <td>\n            Eclats de passé : le Croissant F...</td>
    </tr>
    <tr>
      <th>377</th>
      <td>http://clementgrimal.fr/darwin/files/2018-01-2...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>Eclats de passé : la révolution Néolithique</td>
      <td>20 Janvier 2018</td>
      <td>\n            Eclats de passé : la révolution ...</td>
    </tr>
    <tr>
      <th>378</th>
      <td>http://clementgrimal.fr/darwin/files/2018-01-2...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>Eclats de passé : A la recherche des origines ...</td>
      <td>27 Janvier 2018</td>
      <td>\n            Eclats de passé : A la recherche...</td>
    </tr>
    <tr>
      <th>379</th>
      <td>http://clementgrimal.fr/darwin/files/2018-02-0...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>A la recherche des origines des inégalités (2)</td>
      <td>3 Février 2018</td>
      <td>\n            A la recherche des origines des ...</td>
    </tr>
    <tr>
      <th>380</th>
      <td>http://clementgrimal.fr/darwin/files/2018-02-1...</td>
      <td>https://www.franceinter.fr/emissions/sur-les-e...</td>
      <td>A la recherche des origines des inégalités (3)</td>
      <td>10 Février 2018</td>
      <td>\n            A la recherche des origines des ...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Taille-des-fichiers-mp3">Taille des fichiers mp3<a class="anchor-link" href="#Taille-des-fichiers-mp3">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Il nous manque encore la récupération des tailles de fichier mp3, qui sera inscrite dans le flux RSS :</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[38]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">byte_lengths</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">mp3_link</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="o">.</span><span class="n">tqdm_notebook</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;lien mp3&#39;</span><span class="p">]):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">mp3_link</span><span class="p">)</span>
    <span class="n">byte_lengths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;content-length&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





 
 
<div id="3e592f26-59cc-4f58-b2e6-1ff5acadd3fc"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#3e592f26-59cc-4f58-b2e6-1ff5acadd3fc');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "e4172632f6f24eef863e7c37c12283ea", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[39]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;byte_length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">byte_lengths</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[40]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>lien mp3</th>
      <th>lien description</th>
      <th>titre</th>
      <th>date</th>
      <th>description</th>
      <th>byte_length</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>La théorie de l'évolution de Charles Darwin</td>
      <td>4 Septembre 2010</td>
      <td>Bibliographie:\nL'origine des espèces de Charl...</td>
      <td>51120256</td>
    </tr>
    <tr>
      <th>1</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Le propre de l'homme?</td>
      <td>11 Septembre 2010</td>
      <td>programmation musicale\n   STAFF BENDA BILI...</td>
      <td>52287616</td>
    </tr>
    <tr>
      <th>2</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Nos mémoires</td>
      <td>18 Septembre 2010</td>
      <td>programmation musicale\n   Iggy POP\nKing o...</td>
      <td>51320960</td>
    </tr>
    <tr>
      <th>3</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Nos émotions</td>
      <td>25 Septembre 2010</td>
      <td>programmation musicale\n   EMILY LOISEAU\nL...</td>
      <td>54608000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>http://prevost.pascal.free.fr/public/podcast/s...</td>
      <td>http://www.franceinter.fr/em/sur-les-epaules-d...</td>
      <td>Longévité, jeunesse et vieillissement</td>
      <td>2 Octobre 2010</td>
      <td>programmation musicale\n   Bonga\nMona ki g...</td>
      <td>52762752</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Ecriture-du-fichier-RSS">Ecriture du fichier RSS<a class="anchor-link" href="#Ecriture-du-fichier-RSS">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Maintenant que nous avons collecté toutes les émissions, nous pouvons écrire un ficher RSS, comme nous l'avions déjà fait <a href="http://flothesof.github.io/podcast-rendez-vous-avec-X-fr.html">dans le cas de l'émission Rendez vous avec X</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[41]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">dateparser</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[42]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">xml.etree.cElementTree</span> <span class="k">as</span> <span class="nn">ET</span>

<span class="n">rss</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;rss&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;2.0&quot;</span><span class="p">)</span>
<span class="n">channel</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">rss</span><span class="p">,</span> <span class="s2">&quot;channel&quot;</span><span class="p">)</span>
<span class="n">title</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">)</span>
<span class="n">title</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Podcast Sur les épaules de Darwin&#39;</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="n">description</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Podcast inofficiel de l&#39;émission Sur les épaules de Darwin, tiré du site http://clementgrimal.fr/darwin/ et https://www.franceinter.fr/emissions/sur-les-epaules-de-darwin&quot;</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">item</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">)</span>
    <span class="n">item_title</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">)</span>
    <span class="n">item_title</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]</span>
    <span class="n">item_description</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
    <span class="n">item_description</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>
    <span class="n">item_pubdate</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&quot;pubDate&quot;</span><span class="p">)</span>
    <span class="n">item_pubdate</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">dateparser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">date</span><span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%a</span><span class="s1">, </span><span class="si">%d</span><span class="s1"> %b %Y 11:00:00&#39;</span><span class="p">)</span>
    <span class="n">item_enclosure</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&quot;enclosure&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;lien mp3&#39;</span><span class="p">]),</span>
                                   <span class="n">length</span><span class="o">=</span><span class="n">row</span><span class="o">.</span><span class="n">byte_length</span><span class="p">,</span>
                                  <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;audio/mpeg&quot;</span><span class="p">)</span>
<span class="n">tree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">ElementTree</span><span class="p">(</span><span class="n">rss</span><span class="p">)</span>
<span class="n">tree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;files/podcast_Sur_les_epaules_de_Darwin.xml&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Le lien vers le fichier généré est ici : <strong><a href="https://raw.githubusercontent.com/flothesof/posts/master/files/podcast_Sur_les_epaules_de_Darwin.xml">https://raw.githubusercontent.com/flothesof/posts/master/files/podcast_Sur_les_epaules_de_Darwin.xml</a></strong>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Ce billet a été écrit à l'aide d'un notebook Jupyter. Son contenu est sous licence BSD. Une vue statique de ce notebook peut être consultée et téléchargée ici : <a href="http://nbviewer.ipython.org/urls/raw.github.com/flothesof/posts/master/20170908_PodcastEpaulesDeDarwin.ipynb">20170908_PodcastEpaulesDeDarwin.ipynb</a>.</em></p>

</div>
</div>
</div>
 


<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        " linebreaks: { automatic: true, width: '95% container' }, " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
        </div>

        <div class="meta">
            <div>
                    <a href="http://flothesof.github.io/tag/podcast.html" class="tag">Podcast</a>
            </div>
        </div>
    </article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
    <script type="text/javascript">
      var disqus_shortname = 'froliansblog';
      var disqus_identifier = '/podcast-sur-les-epaules-de-Darwin-fr.html';
      var disqus_url = 'http://flothesof.github.io/podcast-sur-les-epaules-de-Darwin-fr.html';
      var disqus_title = 'Un flux RSS pour le podcast Sur les épaules de Darwin';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = "//" + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
  </section>

</div>

<style type="text/css">
{
    max-width: 700px;
}

.text_cell .prompt {
    display: none;
}

div.cell {
    padding: 0;
}

div.text_cell_render {
    padding: 0;
}

div.prompt {
    font-size: 13px;
}

div.input_prompt {
    padding: .7em 0.2em;
}

div.output_prompt {
    padding: .4em .2em;
}

div.input_area {
    margin: .2em 0.4em;
    max-width: 580px;
}

table.dataframe {
    font-family: Arial, sans-serif;
    font-size: 13px;
    line-height: 20px;
}

table.dataframe th, td {
    padding: 4px;
    text-align: left;
}

pre code {
    background-color: inherit;
}</style>

        </div>
<!--
    <footer>
      <p>
        © 2012-2017 Florian Le Bourdais, license <a href=""> </a>
        unless otherwise noted.
        Generated by <a href= "http://docs.getpelican.com/">Pelican</a>.
      </p>
    </footer>
-->
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-68753870-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-68753870-1');
    ga('send', 'pageview');
</script>
    </body>
</html>